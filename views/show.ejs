<% include ./partials/header.ejs %>
<div class="w-full min-h-screen bg-stone-50 px-10 py-8">

  <!-- Posts Grid -->
  <div class="columns-1 sm:columns-2 md:columns-3 lg:columns-4 gap-2 space-y-4">
    <% if (board.posts && board.posts.length > 0) { %>
      <% board.posts.forEach(function(post) { %>
        <div class="card relative overflow-hidden rounded-lg  transition-shadow hover:shadow-xl">
          <div class="image-container bg-zinc-700 relative  break-inside-avoid mb-4 overflow-hidden group w-full h-auto  rounded-lg">
            <a href="/delete/<%= post._id %>" onclick="return confirmDelete(event)" class="delete-icon absolute top-2 right-2 bg-red-600 p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 2a2 2 0 00-2 2H4a1 1 0 000 2h12a1 1 0 000-2h-4a2 2 0 00-2-2zM5 8a1 1 0 00-1 1v7a2 2 0 002 2h6a2 2 0 002-2V9a1 1 0 10-2 0v7H6V9a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
            </a>
            <img class="w-full h-auto object-cover transition-opacity duration-300" src="/images/uploads/<%= post.image %>" alt="Post image for <%= post.title %>">
          </div>
          <h5 class="mt-2 text-md font-semibold"><%= post.title %></h5>
        </div>
      <% }) %>
    <% } else { %>
      <p class="text-center col-span-full text-lg text-gray-500">No posts in this board yet. Click "Add New Post" to get started!</p>
    <% } %>
  </div>
  
</div>

<% include ./partials/footer.ejs %>

<script>
  // Confirm delete action
  function confirmDelete(event) {
    if (!confirm("Are you sure you want to delete this image?")) {
      event.preventDefault(); // Prevents deletion if the user cancels
    }
  }
</script>
